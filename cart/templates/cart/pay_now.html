<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<button id="pay-btn">Pay Now</button>

<script>
var options = {
    "key": "{{ razorpay_key }}",
    "amount": "{{ order.total_amount|floatformat:2 }}",
    "currency": "INR",
    "name": "My Shop",
    "order_id": "{{ payment.razorpay_order_id }}",
    "handler": function (response){
        var form = document.createElement('form');
        form.method = 'POST';
        form.action = "{% url 'verify_payment' %}";

        form.innerHTML = `
            <input type="hidden" name="razorpay_payment_id" value="${response.razorpay_payment_id}">
            <input type="hidden" name="razorpay_order_id" value="${response.razorpay_order_id}">
            <input type="hidden" name="razorpay_signature" value="${response.razorpay_signature}">
        `;
        document.body.appendChild(form);
        form.submit();
    }
};

var rzp = new Razorpay(options);
document.getElementById('pay-btn').onclick = function(e){
    rzp.open();
    e.preventDefault();
}
</script>
